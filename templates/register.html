<!DOCTYPE html>
<html lang="en">
<head>
<title>The Estate - Contact</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="description" content="The Estate Teplate">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="{{url_for('static', filename='styles/bootstrap4/bootstrap.min.css')}}">
<link href="{{url_for('static', filename='plugins/fontawesome-free-5.0.1/css/fontawesome-all.css')}}" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="{{url_for('static', filename='plugins/OwlCarousel2-2.2.1/owl.carousel.css')}}">
<link rel="stylesheet" type="text/css" href="{{url_for('static', filename='plugins/OwlCarousel2-2.2.1/owl.theme.default.css')}}">
<link rel="stylesheet" type="text/css" href="{{url_for('static', filename='plugins/OwlCarousel2-2.2.1/animate.css')}}">
<link rel="stylesheet" type="text/css" href="{{url_for('static', filename='styles/contact_styles.css')}}">
<link rel="stylesheet" type="text/css" href="{{url_for('static', filename='styles/contact_responsive.css')}}">
</head>

<body onload="myFunction()">

<div class="super_container">
	
	<!-- Home -->
	<div class="home">
		<!-- Image by: https://unsplash.com/@breather -->
		<div class="home_background" style="background-image:url({{url_for('static', filename='images/contact.jpg')}})"></div>
		
		<div class="container">
			<div class="row">
				<div class="col">
					<div class="home_content">
						<div class="home_title">
							<h2>Register</h2>
						</div>
						<div class="breadcrumbs">
							<span> Create an account to buy properties from sellers and post advertisements of your properties</span>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Header -->

	<header class="header trans_300">
		<div class="container">
			<div class="row">
				<div class="col">
					<div class="header_container d-flex flex-row align-items-center trans_300">

						<!-- Logo -->

						<div class="logo_container">
							<a href="#">
								<div class="logo">
									<img src="{{url_for('static', filename='images/logo.png')}}" alt="">
									<span>BroAcre</span>
								</div>
							</a>
						</div>
						
						<!-- Main Navigation -->

						<nav class="main_nav">
							<ul class="main_nav_list">
								<li class="main_nav_item"><a href="index.html">home</a></li>
								<li class="main_nav_item"><a href="about.html">about us</a></li>
								<li class="main_nav_item"><a href="listings.html">listings</a></li>
								<li class="main_nav_item"><a href="news.html">forums</a></li>
								<li class="main_nav_item"><a href="#">contact</a></li>
							</ul>
						</nav>
						
						<!-- Phone Home -->
                        <a href="login.html">
						  <div class="phone_home text-center">
							<span>Log In</span>
						  </div>
                        </a>
						
						<!-- Hamburger -->

						<div class="hamburger_container menu_mm">
							<div class="hamburger menu_mm">
								<i class="fas fa-bars trans_200 menu_mm"></i>
							</div>
						</div>

					</div>
				</div>
			</div>
		</div>

		<!-- Menu -->

		<div class="menu menu_mm">
			<ul class="menu_list">
				<li class="menu_item">
					<div class="container">
						<div class="row">
							<div class="col">
								<a href="index.html">home</a>
							</div>
						</div>
					</div>
				</li>
				<li class="menu_item">
					<div class="container">
						<div class="row">
							<div class="col">
								<a href="about.html">about us</a>
							</div>
						</div>
					</div>
				</li>
				<li class="menu_item">
					<div class="container">
						<div class="row">
							<div class="col">
								<a href="listings.html">listings</a>
							</div>
						</div>
					</div>
				</li>
				<li class="menu_item">
					<div class="container">
						<div class="row">
							<div class="col">
								<a href="news.html">forums</a>
							</div>
						</div>
					</div>
				</li>
				<li class="menu_item">
					<div class="container">
						<div class="row">
							<div class="col">
								<a href="#">contact</a>
							</div>
						</div>
					</div>
				</li>
			</ul>
		</div>

	</header>

	<!-- Contact -->

	<div class="contact">
		<div class="container">
			<div class="row">
				
				<div class="col-lg-6 contact_col" style="margin: auto auto">
					<div class="estate_contact_form">
						<div class="contact_title">Register</div>
						<div class="estate_contact_form_container">
							<form id="estate_contact_form" class="estate_contact_form" action="index.html" onsubmit="return validateForm(this)" method="post">
                                <input id="firstname" name="firstname" class="estate_input_field estate_contact_form_name" type="text" placeholder="First Name" required="required" data-error="First Name is required.">
                                <input id="lastname" name="lastname" class="estate_input_field estate_contact_form_name" type="text" placeholder="Last Name" required="required" data-error="Last Name is required.">
                                <input id="emailid" name="emailid" class="estate_input_field estate_contact_form_name" type="email" placeholder="Email ID" required="required" data-error="email id is required.">
                                <input id="phone" name="phone" class="estate_input_field estate_contact_form_name" type="text" placeholder="Phone number" required="required" data-error="phone number is required." >
                                <input id="username" name="username" class="estate_input_field estate_contact_form_name" type="text" placeholder="Username" required="required" data-error="username is required.">
								<input id="password" name="password" class="estate_input_field estate_contact_form_name" type="password" placeholder="Password" required="required" data-error="password is required." onkeyup="check()">
								<input id="password2" name="password2" class="estate_input_field estate_contact_form_email" type="password" placeholder="Re enter Password" required="required" data-error="password is required." onkeyup="check()">
                                <div id = "message"></div> 
                                <button id="estate_contact_send_btn" type="submit" class="estate_contact_send_btn trans_200" value="Submit" style="margin-bottom:30px;">register</button>
							</form>
						</div>
					</div>
				</div>
            </div>
        </div>
    </div>
</div>	
<script>

let usernameTaken = false;

function checkIfUsernameTaken() {
	let username = document.getElementById('username').value;
	console.log(username);
	fetch('/check_username_taken?user='+username).then((result) => result.json()).then((res) => {
		if(res.exists) {
			usernameTaken = true;
		}
	});
}

function validateForm(form) {
    
	if(usernameTaken) {
		alert("Invalid username: Username is already taken");
		return false;
	}
    
	return true;
}

let usernameField = document.getElementById('username');
usernameField.addEventListener('blur', checkIfUsernameTaken, false);

var check = function() {

        if (document.getElementById('password').value == document.getElementById('password2').value) {
            document.getElementById('message').style.color = 'green';
            document.getElementById('message').innerHTML = 'Passwords match!';
 			document.getElementById("estate_contact_send_btn").disabled = false;
        } else {
            document.getElementById('message').style.color = 'red';
            document.getElementById('message').innerHTML = 'Passwords do not matching';
        }    
        
    }

function myFunction() {
    document.getElementById("estate_contact_send_btn").disabled = true;
}
</script>
<script src="{{url_for('static', filename='js/jquery-3.2.1.min.js')}}"></script>
<script src="{{url_for('static', filename='styles/bootstrap4/popper.js')}}"></script>
<script src="{{url_for('static', filename='styles/bootstrap4/bootstrap.min.js')}}"></script>
<script src="{{url_for('static', filename='plugins/OwlCarousel2-2.2.1/owl.carousel.js')}}"></script>
<script src="{{url_for('static', filename='plugins/easing/easing.js')}}"></script>
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&key=AIzaSyCIwF204lFZg1y4kPSIhKaHEXMLYxxuMhA"></script>
<script src="{{url_for('static', filename='js/contact_custom.js')}}"></script>
<script>
	var usrname = document.getElementById('username').value;

</body>

</html>
